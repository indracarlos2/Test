@model RestorationStore.Domain.Model.Respons

@{
    ViewBag.Title = "Detail completed request";
}
@section scripts {
    <script src="~/Scripts/jquery.unobtrusive-ajax.js"></script>
    <script src="~/Scripts/Response/DetailResponse.js"></script>
    @Scripts.Render("~/bundles/jqueryval")
}
<h2>Detail completed request</h2>
<div>
    <div id="pan_izquierdo">

            <fieldset>
                <legend>Respons</legend>
                <div class="display-label">
                    @Html.DisplayNameFor(model => model.Request.Title.TitleMessage)
                </div>
                <div class="display-field">
                    @Html.DisplayFor(model => model.Request.Title.TitleMessage)
                </div>
                <div>
                    @if(@Model.Id != null) {
                        <div class="editor-label">Final Image</div>
                        <div class="editor-field">
                            <img width="100" height="100"
                                 src="@Url.Action("GetImage",
                                    "Response",
                        new { id=@Model.Id })" />
                        </div>
                    }
                </div>
                <div>
                    @if(@Model.Id != null) {
                        <div class="editor-label">Initial Image</div>
                        <div class="editor-field">
                            <img width="100" height="100"
                                 src="@Url.Action("GetImage",
                                    "Request",
                        new { id_request=@Model.Id_Request })" />
                        </div>
                    }
                </div>
                <div class="display-label">
                    @Html.DisplayNameFor(model => model.Cost)
                </div>
                <div class="display-field">
                   $ @Html.DisplayFor(model => model.Cost)
                </div>
                <div class="display-label">
                   Final description
                </div>
                <div class="display-field">
                    @Html.DisplayFor(model => model.Description)
                </div>
                <div class="display-label">
                    Initial description
                </div>
                <div class="display-field">
                    @Html.DisplayFor(model => model.Request.Description)
                </div>
                <div class="display-label">
                    @Html.DisplayNameFor(model => model.FinalDate)
                </div>
                <div class="display-field">
                    @Html.DisplayFor(model => model.FinalDate)
                </div>
                <div class="display-label">
                    @Html.DisplayNameFor(model => model.Request.InitialDate)
                </div>
                <div class="display-field">
                    @Html.DisplayFor(model => model.Request.InitialDate)
                </div>
            </fieldset>
    </div>

    <div id="pan_centro">
        <fieldset>
            <legend>Commentaries</legend>
            <form id="messageForm">
                @Html.Hidden("id_response", Model.Id)
                <div class="display-label">
                    Author
                </div>
                <div class="display-field">
                    <input id="Author" name="Author" />
                </div>
                <div class="display-label">
                    Commentary
                </div>
                <div class="display-field">
                    <input id="Message" name="Message" 
                           class="text-box single-line" 
                            data-val="true" 
                            data-val-length="Please, no more than 100 characters" 
                            data-val-length-max="100" 
                            data-val-length-min="1" 
                           data-val-required="Please, introduce a commentary" value="" />
                    <span class="field-validation-valid" data-valmsg-for="Message" data-valmsg-replace="true"></span>
                </div>
                
            </form>
            <button id="addMessage" type="submit">Add message</button>
            <div>
                <table>
                    <thead>
                        <tr>
                            <th>Author</th>
                            <th>Commentary</th>
                        </tr>
                    </thead>
                    <tbody id="tableCommentary">
                        <tr><td colspan="2">The data is loading</td></tr>
                    </tbody>
                </table>
            </div>
        </fieldset>
    </div>
</div>